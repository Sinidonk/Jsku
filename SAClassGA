let state = "Azam"; // State awal diatur ke "Azam"
const button = document.getElementById("Susun");

// Fungsi untuk mengirim state ke iframe
function sendStateToIframe(state) {
    const iframe = document.getElementById("Badan");
    const iframeWindow = iframe.contentWindow;

    console.log(`[DEBUG] Mengirim state ke iframe: ${state}`);
    iframeWindow.postMessage({ type: "updateState", state }, "*");
}

// Fungsi untuk mengatur tombol berikutnya dan mengganti background tombol
function updateButtonState() {
    console.log(`[DEBUG] State sebelum update: ${state}`);
    if (state === "Azam") {
        button.style.backgroundImage = "url('https://sinidonk.github.io/Gbrku/icoC.png')";
        state = "Latin";
    } else if (state === "Latin") {
        button.style.backgroundImage = "url('https://sinidonk.github.io/Gbrku/icoD.png')";
        state = "Arti";
    } else if (state === "Arti") {
        button.style.backgroundImage = "url('https://sinidonk.github.io/Gbrku/icoE.png')";
        state = "Semua";
    } else if (state === "Semua") {
        button.style.backgroundImage = "url('https://sinidonk.github.io/Gbrku/icoA.png')";
        state = "Arab";
    } else if (state === "Arab") {
        button.style.backgroundImage = "url('https://sinidonk.github.io/Gbrku/icoB.png')";
        state = "Azam";
    }
    console.log(`[DEBUG] State setelah update: ${state}`);
    console.log(`[DEBUG] Background tombol saat ini: ${button.style.backgroundImage}`);
}

// Event listener untuk tombol
button.addEventListener("click", () => {
    console.log(`[DEBUG] Tombol diklik! State saat ini: ${state}`);
    sendStateToIframe(state); // Kirim state terbaru ke iframe
    updateButtonState(); // Perbarui state tombol
});

// Fungsi untuk memuat konten dalam iframe
function loadIframeContent(url) {
    const iframe = document.getElementById("Badan");
    iframe.src = url;

    iframe.onload = () => {
        console.log(`[DEBUG] Konten iframe dimuat dengan URL: ${url}`);
        sendStateToIframe(state); // Kirim state awal ke iframe setelah dimuat
    };
}

// Saat halaman pertama kali dimuat
document.addEventListener("DOMContentLoaded", () => {
    console.log("[DEBUG] Halaman dimuat. Inisialisasi...");
    button.style.backgroundImage = "url('https://sinidonk.github.io/Gbrku/icoB.png')"; // Tombol dimulai dengan gambar icoB.png
    document.getElementById("Badan").style.display = "block"; // Menampilkan iframe
    sendStateToIframe(state); // Kirim state awal (Azam) ke iframe
    console.log(`[DEBUG] Background tombol awal: ${button.style.backgroundImage}`);
});
